plugin: gcp_compute
# zones: # populate inventory with instances in these regions
#  - europe-west3-b
projects:
  - stich-karl-my-k8s
service_account_file: /root/app/adc.json
auth_kind: serviceaccount
filters: []
scopes:
 - 'https://www.googleapis.com/auth/cloud-platform'
 - 'https://www.googleapis.com/auth/compute.readonly'
groups:
  k8s-cluster: true
keyed_groups:
  # - key: tags['items']
  - key: labels['kubespray-0']
    separator: ''
  - key: labels['kubespray-1']
    separator: ''
  - key: labels['kubespray-2']
    separator: ''        
  - key: labels['hostgroup']
    separator: ''    
hostnames:
  # List host by name instead of the default public ip
  - name
  - private_ip
  - public_ip
compose:
  # Set an inventory parameter to use the Public IP address to connect to the host
  # For Private ip use "networkInterfaces[0].networkIP"
  ansible_host: networkInterfaces[0].accessConfigs[0].natIP
  ansible_connection: ssh
  ansible_ssh_private_key_file: /root/.ssh/google_compute_engine
  ansible_user: root  